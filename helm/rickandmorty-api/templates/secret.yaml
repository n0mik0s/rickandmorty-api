apiVersion: v1
kind: Secret
metadata:
  name: {{ include "rickandmorty-api.secretName" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "rickandmorty-api.labels" . | nindent 4 }}
  annotations:
    # Prevent Helm from storing secret values in release history in plain text.
    helm.sh/resource-policy: keep
type: Opaque
stringData:
  secrets.json: |
    {
      "host":     {{ .Values.dbSecret.host     | quote }},
      "user":     {{ .Values.dbSecret.user     | quote }},
      "password": {{ .Values.dbSecret.password | quote }},
      "dbname":   {{ .Values.dbSecret.dbname   | quote }}
    }